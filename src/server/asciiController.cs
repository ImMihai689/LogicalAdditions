using LogicAPI.Server.Components;
using LogicAPI.Server;
using LogicLog;
using LogicWorld.Server.Circuitry;

namespace LA
{
    public class asciiController : LogicComponent
    {
        byte[,] characters = new byte[97, 7]
        {
        {
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
        },
        {
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b00000,
            0b00100,
        },
        {
            0b01010,
            0b01010,
            0b01010,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
        },
        {
            0b01010,
            0b01010,
            0b11111,
            0b01010,
            0b11111,
            0b01010,
            0b01010,
        },
        {
            0b00100,
            0b01111,
            0b10100,
            0b01110,
            0b00101,
            0b11111,
            0b00100,
        },
        {
            0b11000,
            0b11001,
            0b00010,
            0b00100,
            0b01000,
            0b10011,
            0b00011,
        },
        {
            0b01100,
            0b10010,
            0b10100,
            0b01000,
            0b10101,
            0b10010,
            0b01100,
        },
        {
            0b01100,
            0b00100,
            0b01000,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
        },
        {
            0b00010,
            0b00100,
            0b01000,
            0b01000,
            0b01000,
            0b00100,
            0b00010,
        },
        {
            0b01000,
            0b00100,
            0b00010,
            0b00010,
            0b00010,
            0b00100,
            0b01000,
        },
        {
            0b00000,
            0b00100,
            0b10101,
            0b01110,
            0b10101,
            0b00100,
            0b00000,
        },
        {
            0b00000,
            0b00100,
            0b00100,
            0b11111,
            0b00100,
            0b00100,
            0b00000,
        },
        {
            0b00000,
            0b00000,
            0b00000,
            0b01100,
            0b00100,
            0b01000,
            0b00000,
        },
        {
            0b00000,
            0b00000,
            0b00000,
            0b11111,
            0b00000,
            0b00000,
            0b00000,
        },
        {
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b01100,
            0b01100,
        },
        {
            0b00000,
            0b00001,
            0b00010,
            0b00100,
            0b01000,
            0b10000,
            0b00000,
        },
        {
            0b01110,
            0b10001,
            0b10011,
            0b10101,
            0b11001,
            0b10001,
            0b01110,
        },
        {
            0b00100,
            0b01100,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b01110,
        },
        {
            0b01110,
            0b10001,
            0b00001,
            0b00010,
            0b00100,
            0b01000,
            0b11111,
        },
        {
            0b11111,
            0b00010,
            0b00100,
            0b00010,
            0b00001,
            0b10001,
            0b01110,
        },
        {
            0b00010,
            0b00110,
            0b01010,
            0b10010,
            0b11111,
            0b00010,
            0b00010,
        },
        {
            0b11111,
            0b10000,
            0b11110,
            0b00001,
            0b00001,
            0b10001,
            0b01110,
        },
        {
            0b00110,
            0b01000,
            0b10000,
            0b11110,
            0b10001,
            0b10001,
            0b01110,
        },
        {
            0b11111,
            0b00001,
            0b00010,
            0b00100,
            0b01000,
            0b01000,
            0b01000,
        },
        {
            0b01110,
            0b10001,
            0b10001,
            0b01110,
            0b10001,
            0b10001,
            0b01110,
        },
        {
            0b01110,
            0b10001,
            0b10001,
            0b01111,
            0b00001,
            0b00010,
            0b01100,
        },
        {
            0b00000,
            0b01100,
            0b01100,
            0b00000,
            0b01100,
            0b01100,
            0b00000,
        },
        {
            0b00000,
            0b01100,
            0b01100,
            0b00000,
            0b01100,
            0b00100,
            0b01000,
        },
        {
            0b00010,
            0b00100,
            0b01000,
            0b10000,
            0b01000,
            0b00100,
            0b00010,
        },
        {
            0b00000,
            0b00000,
            0b11111,
            0b00000,
            0b11111,
            0b00000,
            0b00000,
        },
        {
            0b01000,
            0b00100,
            0b00010,
            0b00001,
            0b00010,
            0b00100,
            0b01000,
        },
        {
            0b01110,
            0b10001,
            0b00001,
            0b00010,
            0b00100,
            0b00000,
            0b00100,
        },
        {
            0b01110,
            0b10001,
            0b00001,
            0b01101,
            0b10101,
            0b10101,
            0b01110,
        },
        {
            0b01110,
            0b10001,
            0b10001,
            0b10001,
            0b11111,
            0b10001,
            0b10001,
        },
        {
            0b11110,
            0b10001,
            0b10001,
            0b11110,
            0b10001,
            0b10001,
            0b11110,
        },
        {
            0b01110,
            0b10001,
            0b10000,
            0b10000,
            0b10000,
            0b10001,
            0b01110,
        },
        {
            0b11100,
            0b10010,
            0b10001,
            0b10001,
            0b10001,
            0b10010,
            0b11100,
        },
        {
            0b11111,
            0b10000,
            0b10000,
            0b11110,
            0b10000,
            0b10000,
            0b11111,
        },
        {
            0b11111,
            0b10000,
            0b10000,
            0b11110,
            0b10000,
            0b10000,
            0b10000,
        },
        {
            0b01110,
            0b10001,
            0b10000,
            0b10011,
            0b10001,
            0b10001,
            0b01110,
        },
        {
            0b10001,
            0b10001,
            0b10001,
            0b11111,
            0b10001,
            0b10001,
            0b10001,
        },
        {
            0b01110,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b01110,
        },
        {
            0b00111,
            0b00010,
            0b00010,
            0b00010,
            0b00010,
            0b10010,
            0b01100,
        },
        {
            0b10001,
            0b10010,
            0b10100,
            0b11000,
            0b10100,
            0b10010,
            0b10001,
        },
        {
            0b10000,
            0b10000,
            0b10000,
            0b10000,
            0b10000,
            0b10000,
            0b11111,
        },
        {
            0b10001,
            0b11011,
            0b10101,
            0b10101,
            0b10001,
            0b10001,
            0b10001,
        },
        {
            0b10001,
            0b10001,
            0b11001,
            0b10101,
            0b10011,
            0b10001,
            0b10001,
        },
        {
            0b01110,
            0b10001,
            0b10001,
            0b10001,
            0b10001,
            0b10001,
            0b01110,
        },
        {
            0b11110,
            0b10001,
            0b10001,
            0b11110,
            0b10000,
            0b10000,
            0b10000,
        },
        {
            0b01110,
            0b10001,
            0b10001,
            0b10001,
            0b10001,
            0b10010,
            0b01101,
        },
        {
            0b11110,
            0b10001,
            0b10001,
            0b11110,
            0b10100,
            0b10010,
            0b10001,
        },
        {
            0b01111,
            0b10000,
            0b10000,
            0b01110,
            0b00001,
            0b00001,
            0b11110,
        },
        {
            0b11111,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
        },
        {
            0b10001,
            0b10001,
            0b10001,
            0b10001,
            0b10001,
            0b10001,
            0b01110,
        },
        {
            0b10001,
            0b10001,
            0b10001,
            0b10001,
            0b10001,
            0b01010,
            0b00100,
        },
        {
            0b10001,
            0b10001,
            0b10001,
            0b10101,
            0b10101,
            0b10101,
            0b01010,
        },
        {
            0b10001,
            0b10001,
            0b01010,
            0b00100,
            0b01010,
            0b10001,
            0b10001,
        },
        {
            0b10001,
            0b10001,
            0b10001,
            0b01010,
            0b00100,
            0b00100,
            0b00100,
        },
        {
            0b11111,
            0b00001,
            0b00010,
            0b00100,
            0b01000,
            0b10000,
            0b11111,
        },
        {
            0b01110,
            0b01000,
            0b01000,
            0b01000,
            0b01000,
            0b01000,
            0b01110,
        },
        {
            0b00000,
            0b10000,
            0b01000,
            0b00100,
            0b00010,
            0b00001,
            0b00000,
        },
        {
            0b01110,
            0b00010,
            0b00010,
            0b00010,
            0b00010,
            0b00010,
            0b01110,
        },
        {
            0b00100,
            0b01010,
            0b10001,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
        },
        {
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b11111,
        },
        {
            0b01000,
            0b00100,
            0b00010,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
        },
        {
            0b00000,
            0b00000,
            0b01110,
            0b00001,
            0b01111,
            0b10001,
            0b01111,
        },
        {
            0b10000,
            0b10000,
            0b10110,
            0b11001,
            0b10001,
            0b10001,
            0b11110,
        },
        {
            0b00000,
            0b00000,
            0b01110,
            0b10000,
            0b10000,
            0b10001,
            0b01110,
        },
        {
            0b00001,
            0b00001,
            0b01101,
            0b10011,
            0b10001,
            0b10001,
            0b01111,
        },
        {
            0b00000,
            0b00000,
            0b01110,
            0b10001,
            0b11111,
            0b10000,
            0b01110,
        },
        {
            0b00110,
            0b01001,
            0b01000,
            0b11100,
            0b01000,
            0b01000,
            0b01000,
        },
        {
            0b00000,
            0b01111,
            0b10001,
            0b11111,
            0b00001,
            0b01110,
            0b00000,
        },
        {
            0b10000,
            0b10000,
            0b10110,
            0b11001,
            0b10001,
            0b10001,
            0b10001,
        },
        {
            0b00100,
            0b00000,
            0b01100,
            0b00100,
            0b00100,
            0b00100,
            0b01110,
        },
        {
            0b00010,
            0b00000,
            0b00110,
            0b00010,
            0b00010,
            0b10010,
            0b01100,
        },
        {
            0b10000,
            0b10000,
            0b10010,
            0b10100,
            0b11000,
            0b10100,
            0b10010,
        },
        {
            0b01100,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b01110,
        },
        {
            0b00000,
            0b00000,
            0b11010,
            0b10101,
            0b10001,
            0b10001,
            0b10001,
        },
        {
            0b00000,
            0b00000,
            0b10110,
            0b11001,
            0b10001,
            0b10001,
            0b10001,
        },
        {
            0b00000,
            0b00000,
            0b01110,
            0b10001,
            0b10001,
            0b10001,
            0b01110,
        },
        {
            0b00000,
            0b00000,
            0b11110,
            0b10001,
            0b11110,
            0b10000,
            0b10000,
        },
        {
            0b00000,
            0b00000,
            0b01101,
            0b10011,
            0b01111,
            0b00001,
            0b00001,
        },
        {
            0b00000,
            0b00000,
            0b10110,
            0b11001,
            0b10000,
            0b10000,
            0b10000,
        },
        {
            0b00000,
            0b00000,
            0b01110,
            0b10000,
            0b01110,
            0b00001,
            0b11110,
        },
        {
            0b01000,
            0b01000,
            0b11100,
            0b01000,
            0b01000,
            0b01001,
            0b00110,
        },
        {
            0b00000,
            0b00000,
            0b10001,
            0b10001,
            0b10001,
            0b10011,
            0b01101,
        },
        {
            0b00000,
            0b00000,
            0b10001,
            0b10001,
            0b10001,
            0b01010,
            0b00100,
        },
        {
            0b00000,
            0b00000,
            0b10001,
            0b10001,
            0b10101,
            0b10101,
            0b01010,
        },
        {
            0b00000,
            0b00000,
            0b10001,
            0b01010,
            0b00100,
            0b01010,
            0b10001,
        },
        {
            0b00000,
            0b00000,
            0b10001,
            0b10001,
            0b01111,
            0b00001,
            0b01110,
        },
        {
            0b00000,
            0b00000,
            0b11111,
            0b00010,
            0b00100,
            0b01000,
            0b11111,
        },
        {
            0b00010,
            0b00100,
            0b00100,
            0b01000,
            0b00100,
            0b00100,
            0b00010,
        },
        {
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
            0b00100,
        },
        {
            0b01000,
            0b00100,
            0b00100,
            0b00010,
            0b00100,
            0b00100,
            0b01000,
        },
        {
            0b00000,
            0b00000,
            0b00000,
            0b01101,
            0b10010,
            0b00000,
            0b00000,
        },
        {
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
            0b00000,
        },
        {
            0b01110,
            0b11011,
            0b11011,
            0b11011,
            0b11111,
            0b11011,
            0b01110,
        }
        };
        int address = 0;
        /*
         * 0  1  2  3  4
         * 
         * 5  6  7  8  9
         * 
         * 10 11 12 13 14
         * 
         * 15 16 17 18 19
         * 
         * 20 21 22 23 24
         * 
         * 25 26 27 28 29
         * 
         * 30 31 32 33 34
         */
        protected override void DoLogicUpdate()
        {
            if (Inputs[8].On /* input 8 is the set pin*/)
            {
                address = 0;
                if (Inputs[0].On) address += 1;
                if (Inputs[1].On) address += 2;
                if (Inputs[2].On) address += 4;
                if (Inputs[3].On) address += 8;
                if (Inputs[4].On) address += 16;
                if (Inputs[5].On) address += 32;
                if (Inputs[6].On) address += 64;
                //if (Inputs[7].On) address += 128;
                address -= 32;
                if (address < 0) address = 96; //if invalid code, show error code, at characters[96, x]

                for (int i = 0; i < 7; i++) 
                {
                    for (int o = 0; o < 5; o++)
                    {
                        Outputs[o + i * 5].On = ((characters[address, i] >> 4 - o) & 1) > 0;
                    }
                }
            }
        }
    }
}